import{a as O}from"./chunk-KMCSDFWS.js";import{a as T,b as x,c as z}from"./chunk-5JPRDBNC.js";import{A as s,B as h,C as S,D as c,E as y,G as M,H as V,I as L,J as w,K as p,L as N,N as k,P as F,Q as D,ca as v,ea as j,ga as A,ha as X,ja as q,l as b,la as Q,ma as R,na as P,p as C,q as I,r as l,s as u,sa as $,v as a,va as G,w as g,x as _,xa as U,y as f,z as r}from"./chunk-WB7VSCDF.js";var ee=["f"];function te(n,e){if(n&1){let d=S();r(0,"button",13),c("click",function(){l(d);let t=y();return u(t.onDelete())}),p(1,"Delete"),s()}}var B=(()=>{let e=class e{constructor(i){this.slService=i,this.editMode=!1}ngOnInit(){this.subscription=this.slService.startedEditing.subscribe(i=>{this.editItemIndex=i,this.editMode=!0,this.editedItem=this.slService.getIngredient(i),this.formShopping.setValue({name:this.editedItem.name,amount:this.editedItem.amount})})}ngOnDestroy(){this.subscription.unsubscribe()}onSubmitShoppingListItem(i){let t=i.value,o=new T(t.name,t.amount);this.editMode?this.slService.updateIngredient(this.editItemIndex,o):this.slService.addIngredient(o),this.editMode=!1,i.reset()}onClear(){this.editMode=!1,this.formShopping.reset()}onDelete(){this.slService.deleteIngredient(this.editItemIndex),this.onClear()}};e.\u0275fac=function(t){return new(t||e)(g(x))},e.\u0275cmp=C({type:e,selectors:[["app-shopping-edit"]],viewQuery:function(t,o){if(t&1&&M(ee,5),t&2){let m;V(m=L())&&(o.formShopping=m.first)}},decls:20,vars:3,consts:[[1,"row"],[1,"col-xs-12"],[3,"ngSubmit"],["f","ngForm"],[1,"col-sm-5","form-group"],["for","name"],["type","text","required","","id","name","name","name","ngModel","",1,"form-control"],[1,"col-sm-2","form-group"],["for","amount"],["type","number","required","","pattern","^[1-9]+[0-9]*$","name","amount","ngModel","","id","amount",1,"form-control"],["type","submit",1,"btn","btn-success","marginXS",3,"disabled"],["class","btn btn-danger marginXS","type","button",3,"click",4,"ngIf"],["type","button",1,"btn","btn-primary","marginXS",3,"click"],["type","button",1,"btn","btn-danger","marginXS",3,"click"]],template:function(t,o){if(t&1){let m=S();r(0,"div",0)(1,"div",1)(2,"form",2,3),c("ngSubmit",function(){l(m);let W=w(3);return u(o.onSubmitShoppingListItem(W))}),r(4,"div",0)(5,"div",4)(6,"label",5),p(7,"Name"),s(),h(8,"input",6),s(),r(9,"div",7)(10,"label",8),p(11,"Amount"),s(),h(12,"input",9),s()(),r(13,"div",0)(14,"div",1)(15,"button",10),p(16),s(),_(17,te,2,0,"button",11),r(18,"button",12),c("click",function(){return o.onClear()}),p(19,"Clear"),s()()()()()()}if(t&2){let m=w(3);a(15),f("disabled",!m.valid),a(),N(o.editMode?"Update":"Add"),a(),f("ngIf",o.editMode)}},dependencies:[R,j,P,A,X,$,G,Q,q,D],styles:[".marginXS[_ngcontent-%COMP%]{margin:2px}"]});let n=e;return n})();function ne(n,e){if(n&1){let d=S();r(0,"a",4),c("click",function(){let o=l(d).index,m=y();return u(m.onEditItem(o))}),p(1),s()}if(n&2){let d=e.$implicit;a(),k(" ",d.name," (",d.amount,") ")}}var H=(()=>{let e=class e{constructor(i,t){this.shoppingListService=i,this.loggingService=t}ngOnInit(){this.loggingService.printLog("Shopping list is loaded."),this.ingredientsArr=this.shoppingListService.getIngredients(),this.igChangeSub=this.shoppingListService.ingredientsChanged.subscribe(i=>{this.ingredientsArr=i})}ngOnDestroy(){this.igChangeSub.unsubscribe()}onEditItem(i){this.shoppingListService.startedEditing.next(i)}};e.\u0275fac=function(t){return new(t||e)(g(x),g(O))},e.\u0275cmp=C({type:e,selectors:[["app-shopping-list"]],decls:6,vars:1,consts:[[1,"row"],[1,"col-xs-10"],[1,"list-group"],["class","list-group-item","style","cursor: pointer;",3,"click",4,"ngFor","ngForOf"],[1,"list-group-item",2,"cursor","pointer",3,"click"]],template:function(t,o){t&1&&(r(0,"div",0)(1,"div",1),h(2,"app-shopping-edit")(3,"hr"),r(4,"ul",2),_(5,ne,2,2,"a",3),s()()()),t&2&&(a(5),f("ngForOf",o.ingredientsArr))},dependencies:[F,B]});let n=e;return n})();var oe=[{path:"",component:H}],J=(()=>{let e=class e{};e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=I({type:e}),e.\u0275inj=b({imports:[v.forChild(oe),v]});let n=e;return n})();var Ce=(()=>{let e=class e{};e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=I({type:e}),e.\u0275inj=b({imports:[v,U,J,z]});let n=e;return n})();export{Ce as ShoppingModule};
