import{a as T}from"./chunk-GP3FLTEX.js";import{A as r,B as _,C as x,D as h,E as d,G as C,H as L,I as M,J as S,K as p,L as V,M as E,Q as I,_ as A,da as N,ea as F,ga as R,ha as q,ja as D,la as Q,ma as j,p as w,r as u,s as g,sa as k,ta as B,u as y,ua as H,v as l,w as f,x as b,y as c,z as a}from"./chunk-WB7VSCDF.js";function P(n,o){if(n&1){let s=x();a(0,"app-alert",5),h("close",function(){u(s);let e=d();return g(e.onHandleError())}),r()}if(n&2){let s=d();c("message",s.error)}}function O(n,o){n&1&&(a(0,"div",6),_(1,"app-loading-spinner"),r())}function U(n,o){if(n&1){let s=x();a(0,"form",7,8),h("ngSubmit",function(){u(s);let e=S(1),i=d();return g(i.onSubmit(e))}),a(2,"div",0)(3,"div",9)(4,"label",10),p(5,"Email"),r(),_(6,"input",11),r()(),a(7,"div",0)(8,"div",9)(9,"label",12),p(10,"Password"),r(),_(11,"input",13),r()(),a(12,"div")(13,"button",14),p(14),r(),a(15,"button",15),h("click",function(){u(s);let e=d();return g(e.onSwitchMode())}),p(16),r()()()}if(n&2){let s=S(1),t=d();l(13),c("disabled",!s.valid),l(),V(t.isLoginMode?"Login":"Sign Up"),l(2),E("Switch To ",t.isLoginMode?"Sign Up":"Login","")}}var Y=(()=>{let o=class o{constructor(t,e,i){this.authService=t,this.router=e,this.componentFactoryResolver=i,this.isLoginMode=!0,this.isLoading=!1,this.error=null}onSwitchMode(){this.isLoginMode=!this.isLoginMode}onSubmit(t){if(!t.valid)return;this.isLoading=!0;let e=t.value.email,i=t.value.password,m;this.isLoginMode?m=this.authService.login(e,i):m=this.authService.signup(e,i),m.subscribe({next:v=>{console.log(v),this.isLoading=!1,this.router.navigate(["/recipes"])},error:v=>{this.error=v,this.isLoading=!1}}),t.reset()}onHandleError(){this.error=null}};o.\u0275fac=function(e){return new(e||o)(f(T),f(A),f(y))},o.\u0275cmp=w({type:o,selectors:[["app-auth"]],viewQuery:function(e,i){if(e&1&&C(N,5),e&2){let m;L(m=M())&&(i.alertHost=m.first)}},decls:5,vars:3,consts:[[1,"row"],[1,"col-xs-12"],[3,"message","close",4,"ngIf"],["style","text-align: center;",4,"ngIf"],[3,"ngSubmit",4,"ngIf"],[3,"message","close"],[2,"text-align","center"],[3,"ngSubmit"],["authForm","ngForm"],[1,"form-group","col-lg-5"],["for","email"],["id","email","type","text","ngModel","","name","email","required","","email","",1,"form-control"],["for","password"],["id","password","type","password","ngModel","","name","password","minlength","6","required","",1,"form-control"],["type","submit",1,"btn","btn-primary","marginBtn",3,"disabled"],["type","button",1,"btn","btn-primary","marginBtn",3,"click"]],template:function(e,i){e&1&&(a(0,"div",0)(1,"div",1),b(2,P,1,1,"app-alert",2)(3,O,2,0,"div",3)(4,U,17,3,"form",4),r()()),e&2&&(l(2),c("ngIf",i.error),l(),c("ngIf",i.isLoading),l(),c("ngIf",!i.isLoading))},dependencies:[I,j,F,R,q,k,H,B,Q,D],styles:[".marginBtn[_ngcontent-%COMP%]{margin-right:5px}"]});let n=o;return n})();export{Y as a};
